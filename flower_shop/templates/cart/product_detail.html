<!DOCTYPE html>
<html>
<head>
    <title>{{ product.name }} - Details</title>
</head>
<body>
    <h1>{{ product.name }}</h1>
    <img src="{{ product.image.url }}" alt="{{ product.name }}" style="width: 300px; height: 300px;">
    <p>Price: ${{ product.price }}</p>
    <p>Description: {{ product.description }}</p>

    <!-- Кнопка добавления в корзину -->
    <form action="{% url 'cart:cart_add' product.id %}" method="post">
        {% csrf_token %}
        <button type="submit">Add to Cart</button>
    </form>

    <!-- Кнопка просмотра содержимого корзины -->
    <a href="{% url 'cart:cart_detail' %}">View Cart</a>

    <br><a href="{% url 'cart:catalog' %}">Back to Catalog</a>

    <!-- Раздел отзывов -->
    <h2>Reviews</h2>
    {% if product.reviews.all %}
        <ul>
            {% for review in product.reviews.all %}
                <li>
                    <strong>{{ review.user.username }}</strong> - Rating: {{ review.rating }}/5
                    <p>{{ review.comment }}</p>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No reviews yet. Be the first to review this product!</p>
    {% endif %}

    <!-- Форма добавления отзыва -->
    {% if user.is_authenticated %}
        <h3>Leave a Review</h3>
        <form action="{% url 'cart:add_review' product.id %}" method="post">
            {% csrf_token %}
            <label for="rating">Rating (1-5):</label>
            <select name="rating" id="rating" required>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
            <br>
            <label for="comment">Comment:</label><br>
            <textarea name="comment" id="comment" rows="4" cols="50" required></textarea>
            <br>
            <button type="submit">Submit Review</button>
        </form>
    {% else %}
        <p><a href="{% url 'accounts:login' %}">Login</a> to leave a review.</p>
    {% endif %}
</body>
</html>
